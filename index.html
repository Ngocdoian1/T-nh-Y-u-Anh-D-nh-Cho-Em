<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíñ My Princess - T√¨nh Y√™u Cypherpunk üíñ</title>
  <style>
    /* ======= Base & Colors (gi·ªØ vibe h·ªìng t√≠m cypherpunk, n·ªÅn s√°ng h∆°n ch√∫t) ======= */
    :root{
      --pink-1:#ff007f;
      --pink-2:#ff00ff;
      --accent:#ff2e7e;
      --bg-1:#120017; /* slightly brighter than original */
      --glass: rgba(255,255,255,0.06);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: "Poppins", Inter, system-ui, Arial, sans-serif;
      /* brighten background: keep vibe but more luminous */
      background:
        radial-gradient(circle at 18% 12%, rgba(255,77,166,0.10), transparent 12%),
        radial-gradient(circle at 82% 82%, rgba(170,0,255,0.08), transparent 14%),
        linear-gradient(180deg,#180021 0%, #060006 100%);
      color:#fff;
      overflow-x:hidden;
    }

    /* ======= Cypherpunk heart background (polygon hearts, many) ======= */
    .heart-bg{
      position:fixed;
      inset:0;
      z-index:-2;
      pointer-events:none;
      overflow:hidden;
      background: radial-gradient(circle at center, rgba(255,0,127,0.08), rgba(0,0,0,0.20));
    }
    .heart{
      position:absolute;
      width:48px; height:48px;
      background: linear-gradient(135deg, var(--pink-1), var(--pink-2));
      box-shadow: 0 0 14px rgba(255,0,127,0.7), 0 0 30px rgba(255,0,255,0.4);
      clip-path: polygon(50% 0%, 85% 25%, 100% 62%, 70% 100%, 50% 83%, 30% 100%, 0% 62%, 15% 25%);
      transform-origin:center;
      opacity:0.85;
      animation: floatUp linear infinite;
    }
    @keyframes floatUp{
      0%   { transform: translateY(0) rotate(0deg) scale(0.9); opacity:0; }
      10%  { opacity:0.9; }
      50%  { transform: translateY(-25vh) rotate(12deg) scale(1.05); opacity:1; }
      100% { transform: translateY(-110vh) rotate(30deg) scale(0.8); opacity:0; }
    }

    /* ======= Container ======= */
    .wrap{
      max-width:1100px;
      margin:18px auto;
      padding:18px;
    }
    header{
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    h1{
      margin:0;
      font-size:1.6rem;
      letter-spacing:0.6px;
      text-shadow:0 0 18px rgba(255,0,127,0.45);
      display:flex;
      gap:10px;
      align-items:center;
    }
    .subline{
      color: #f7d9e9;
      opacity:0.95;
      font-size:0.9rem;
    }

    /* ======= Heart circle + Days counter ======= */
    .heart-circle{
      width:190px;
      height:190px;
      border-radius:50%;
      margin:18px auto 10px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: radial-gradient(circle at 30% 30%, rgba(255,182,193,0.16), rgba(255,105,180,0.08));
      box-shadow: inset 0 0 22px rgba(255,105,180,0.12), 0 8px 48px rgba(255,0,255,0.18);
      border: 1px solid rgba(255,0,127,0.12);
      position: relative;
      overflow:visible;
      transition: box-shadow 200ms ease, transform 200ms ease;
    }
    .heart-circle .days{
      font-size:1.3rem;
      font-weight:700;
      color:#fff;
      text-shadow: 0 0 10px rgba(255,255,255,0.08);
      z-index:2;
    }

    /* ===== NEW: Top stats bar (ƒë∆∞a l√™n g·∫ßn v√≤ng tr√≤n) ===== */
    .love-stats-top{
      width:100%;
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
      margin:8px auto 6px;
    }
    .love-stats-top .stat{
      background:var(--glass);
      padding:6px 10px;
      border-radius:10px;
      min-width:88px;
      text-align:center;
      border:1px solid rgba(255,0,127,0.08);
      box-shadow:0 8px 24px rgba(0,0,0,0.25);
    }
    .love-stats-top .stat span{
      display:block;
      font-weight:800;
      font-size:1rem;
    }
    .love-stats-top .stat small{
      display:block;
      opacity:0.9;
      font-size:0.8rem;
      color:#ffd6ec;
    }

    /* ======= Aura hearts (small particle hearts around circle) ======= */
    #auraContainer { position:absolute; inset:0; pointer-events:none; z-index:1; }
    .aura-heart {
      position:absolute;
      width:12px; height:12px;
      background: linear-gradient(135deg, var(--pink-1), var(--pink-2));
      box-shadow: 0 6px 14px rgba(255,0,127,0.25);
      clip-path: polygon(50% 0%, 85% 25%, 100% 62%, 70% 100%, 50% 83%, 30% 100%, 0% 62%, 15% 25%);
      transform-origin:center;
      opacity:1;
      pointer-events:none;
      animation-name: auraFloat;
      animation-timing-function: cubic-bezier(.2,.9,.2,1);
      animation-fill-mode: forwards;
    }
    @keyframes auraFloat {
      from { transform: translate(0,0) scale(1); opacity: 0.95; }
      to   { transform: translate(var(--dx,0px), var(--dy,-120px)) scale(0.45); opacity: 0; }
    }

    /* ======= Horizontal slider (placed under circle) ======= */
    .horizontal-love {
      width:100%;
      display:flex;
      justify-content:center;
      margin-top:8px;
      margin-bottom:10px;
    }
    .horizontal-love .slider-wrap {
      width:260px;
      display:flex;
      align-items:center;
      gap:12px;
      flex-direction:column;
    }

    /* range track ‚Äî th√™m hi·ªáu ·ª©ng ‚Äúch·∫°y‚Äù ƒë·ªÉ sinh ƒë·ªông */
    .horizontal-love input[type=range]{
      width:100%;
      -webkit-appearance:none;
      appearance:none;
      height:12px;
      background: linear-gradient(90deg, var(--pink-1), var(--pink-2), var(--accent));
      border-radius:999px;
      outline:none;
      background-size: 200% 100%;
      animation: trackFlow 3.2s linear infinite;
      box-shadow: 0 6px 18px rgba(255,0,127,0.18), inset 0 0 8px rgba(255,255,255,0.06);
    }
    @keyframes trackFlow {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }
    .horizontal-love input[type=range]::-webkit-slider-thumb{
      -webkit-appearance:none;
      appearance:none;
      width:30px;height:30px;border-radius:50%;
      background: #fff;
      border:3px solid var(--pink-1);
      box-shadow: 0 8px 20px rgba(0,0,0,0.6), 0 0 0 0 rgba(255,0,127,0.4);
      cursor:grab;
      transition: box-shadow 180ms ease, transform 180ms ease;
    }
    .horizontal-love input[type=range]:active::-webkit-slider-thumb{
      transform: scale(1.05);
      box-shadow: 0 12px 24px rgba(0,0,0,0.7), 0 0 0 8px rgba(255,0,127,0.12);
    }
    .horizontal-love .mood{
      font-size:44px;
      margin-top:6px;
      font-family: "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
      text-shadow: 0 6px 18px rgba(255,0,127,0.12);
    }

    /* ======= Love Progress (kept) ======= */
    .love-progress{
      width:80%;
      max-width:600px;
      height:14px;
      background:var(--glass);
      border-radius:999px;
      margin:10px auto 22px;
      overflow:hidden;
      box-shadow:0 0 18px rgba(255,0,127,0.06);
    }
    .love-progress-fill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--pink-1), var(--pink-2), var(--accent));
      transition:width 800ms cubic-bezier(.2,.9,.2,1);
    }

    /* ======= Main content grid ======= */
    .grid{
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:22px;
      align-items:start;
      margin-top:6px;
    }
    @media (max-width:900px){
      .grid{ grid-template-columns:1fr; }
    }

    /* ======= Slideshow (left column) with corner hearts ======= */
    .slideshow-card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:12px;
      border-radius:14px;
      box-shadow:0 10px 30px rgba(0,0,0,0.6);
      border:1px solid rgba(255,0,127,0.04);
    }
    .slideshow-frame{
      width:100%;
      height:460px;
      border-radius:12px;
      overflow:hidden;
      position:relative;
      background:linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.36));
    }
    .slide{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      transform: scale(1.02);
      transition: opacity 700ms ease, transform 700ms ease;
    }
    .slide.active{
      opacity:1;
      transform: scale(1);
      z-index:2;
    }
    .slide img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      user-select:none;
      -webkit-user-drag:none;
      background: linear-gradient(180deg, rgba(0,0,0,0.05), rgba(0,0,0,0.12));
    }

    /* corner decorative hearts (fixed) */
    .corner-heart{
      position:absolute;
      font-size:22px;
      color: rgba(255,102,204,0.95);
      z-index:6;
      text-shadow: 0 6px 14px rgba(255,0,127,0.08);
    }
    .corner-heart.tl{ top:12px; left:16px; transform:rotate(-10deg); }
    .corner-heart.tr{ top:12px; right:16px; transform:rotate(10deg); }
    .corner-heart.bl{ bottom:12px; left:16px; transform:rotate(6deg); }
    .corner-heart.br{ bottom:12px; right:16px; transform:rotate(-6deg); }

    /* compact nav buttons (small, round) */
    .nav-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:40px;height:40px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      background: rgba(0,0,0,0.45);
      color:#fff;
      border:1px solid rgba(255,0,127,0.12);
      cursor:pointer;
      transition: transform 160ms, background 160ms;
      backdrop-filter: blur(4px);
      z-index:5;
    }
    .nav-btn:hover{ transform:translateY(-50%) scale(1.06); background: rgba(255,0,127,0.85); }
    .nav-prev{ left:10px; }
    .nav-next{ right:10px; }

    /* pagination dots */
    .dots{
      position:absolute;
      bottom:12px;
      left:50%;
      transform:translateX(-50%);
      display:flex;
      gap:8px;
      z-index:6;
    }
    .dot{
      width:9px;height:9px;border-radius:999px;background:rgba(255,255,255,0.18);
      border:1px solid rgba(255,0,127,0.08);
      cursor:pointer;
      transition: transform 130ms, background 130ms;
    }
    .dot.active{ background: linear-gradient(90deg, var(--pink-1), var(--pink-2)); transform:scale(1.25); }

    /* autoplay overlay controls - kept for layout but pause button removed */
    .slideshow-top-right{
      position:absolute;
      top:10px;
      right:10px;
      display:flex;
      gap:8px;
      z-index:6;
      align-items:center;
    }
    .small-toggle{
      background:rgba(0,0,0,0.45);
      border-radius:8px;
      padding:6px 8px;
      font-size:0.85rem;
      cursor:pointer;
      border:1px solid rgba(255,0,127,0.06);
    }
    .small-toggle:hover{ background: rgba(255,0,127,0.85); }

    /* ======= Right column ======= */
    .right-panel{
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      padding:12px;
      border-radius:12px;
      border:1px solid rgba(255,0,127,0.035);
      display:flex;
      flex-direction:column;
      gap:14px;
      align-items:center;
    }
    .mood{
      margin-top:10px;
      font-size:40px;
      transition: transform 240ms ease, filter 240ms ease;
      font-family: "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
    }

    /* music toggle */
    .music-toggle{
      display:flex; gap:8px; align-items:center;
      padding:6px 10px;
      border-radius:999px;
      cursor:pointer;
      background:rgba(0,0,0,0.45);
      border:1px solid rgba(255,0,127,0.06);
    }

    /* ====== LOVE QUESTION ====== */
    .love-q{
      margin:14px auto 28px;
      width:100%;
      max-width:760px;
      display:flex;
      justify-content:center;
      gap:18px;
      align-items:center;
      pointer-events:auto;
      perspective: 900px; /* 3D hover */
    }
    .love-q .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,0,127,0.06);
      padding:12px 16px;
      border-radius:12px;
      display:flex;
      gap:12px;
      align-items:center;
      box-shadow: 0 8px 28px rgba(0,0,0,0.35);
      transform-style: preserve-3d;
      transition: transform 240ms ease;
    }
    .love-q .card:hover{
      transform: rotateX(6deg) rotateY(-6deg);
    }
    .love-q .question { 
      font-weight:800; 
      color: #ffd6ec; 
      text-shadow: 0 0 10px rgba(255,0,127,0.26), 0 0 30px rgba(255,0,255,0.12); 
      letter-spacing:.3px;
    }
    .love-q .actions { display:flex; gap:10px; }
    .love-btn{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.06);
      cursor:pointer;
      font-weight:700;
      background: linear-gradient(90deg,var(--pink-1),var(--pink-2));
      color:#fff;
      box-shadow: 0 8px 20px rgba(255,0,127,0.12);
      transition: transform 200ms ease, box-shadow 200ms ease, filter 200ms ease;
    }
    .love-btn:hover{ transform: translateY(-4px) scale(1.03); box-shadow: 0 12px 30px rgba(255,0,127,0.18); filter: brightness(1.05); }
    .love-btn.no{ background: linear-gradient(90deg,#6b6b6b,#4a4a4a); }
    .love-btn.no.shake{ animation: shake 480ms; }
    @keyframes shake { 0%{transform:translateX(0);}20%{transform:translateX(-6px);}40%{transform:translateX(6px);}60%{transform:translateX(-4px);}80%{transform:translateX(4px);}100%{transform:translateX(0);} }

    /* burst hearts used for "C√≥" action */
    .burst {
      position:absolute;
      pointer-events:none;
      font-size:18px;
      transform-origin:center;
      animation: burstUp 1200ms ease-out forwards;
      text-shadow:0 6px 18px rgba(255,0,127,0.12);
    }
    @keyframes burstUp {
      0% { opacity:1; transform: translateY(0) scale(1); }
      60% { opacity:1; transform: translateY(-60px) scale(1.2); }
      100%{ opacity:0; transform: translateY(-140px) scale(0.8); }
    }

    /* broken heart for "Kh√¥ng" action */
    .broken {
      position:absolute;
      pointer-events:none;
      font-size:36px;
      color:#ff4d60;
      transform-origin:center;
      animation: brokenPop 900ms ease-out forwards;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,0.35));
    }
    @keyframes brokenPop {
      0% { opacity:1; transform: scale(0.8) translateY(0) rotate(0deg); }
      50% { transform: scale(1.2) translateY(-10px) rotate(-8deg); opacity:1; }
      100%{ transform: scale(0.6) translateY(-80px) rotate(-28deg); opacity:0; }
    }

    /* footer small */
    footer{ margin-top:18px; text-align:center; color:rgba(255,255,255,0.55); font-size:0.85rem; opacity:0.95; }

    /* small screens adjust */
    @media (max-width:900px){
      .slideshow-frame{ height:360px; }
      .love-q{ flex-direction:column; gap:10px; }
    }
  </style>
</head>
<body>
  <!-- BACKGROUND HEARTS -->
  <div class="heart-bg" id="heartBg"></div>

  <div class="wrap">
    <header>
      <div>
        <h1>üíñ My Princess <span style="font-size:.9rem; margin-left:8px" class="subline">‚Äî T√¨nh y√™u cypherpunk</span></h1>
        <div class="subline" style="margin-top:6px">Keep the vibe ‚Äî m√†u h·ªìng t√≠m, tr√°i tim polygon, neon glow.</div>
      </div>

      <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap">
        <div class="music-toggle" id="musicToggle">
          <span id="musicIcon">üîä</span>
          <small style="opacity:.9">Nh·∫°c n·ªÅn</small>
        </div>
        <div style="text-align:right">
          <small style="display:block; color:rgba(255,255,255,0.6)">Cre NgocDoiAn ‚ú®</small>
        </div>
      </div>
    </header>

    <!-- Heart circle + days -->
    <div class="heart-circle" aria-hidden="true">
      <div id="auraContainer" aria-hidden="true"></div>
      <div class="days" id="loveDays">0 ng√†y</div>
    </div>

    <!-- NEW: Top stats moved near circle -->
    <div class="love-stats-top" id="loveStatsTop" aria-hidden="false">
      <div class="stat"><span id="cYears">0</span><small>NƒÉm</small></div>
      <div class="stat"><span id="cMonths">0</span><small>Th√°ng</small></div>
      <div class="stat"><span id="cWeeks">0</span><small>Tu·∫ßn</small></div>
      <div class="stat"><span id="cDays">0</span><small>Ng√†y</small></div>
      <div class="stat"><span id="cHours">0</span><small>Gi·ªù</small></div>
      <div class="stat"><span id="cMinutes">0</span><small>Ph√∫t</small></div>
      <div class="stat"><span id="cSeconds">0</span><small>Gi√¢y</small></div>
    </div>

    <!-- HORIZONTAL SLIDER (right under circle) -->
    <div class="horizontal-love" aria-hidden="false">
      <div class="slider-wrap">
        <input id="loveSlider" type="range" min="0" max="100" value="50" />
        <div class="mood" id="moodIcon" aria-live="polite" role="img">üòê</div>
      </div>
    </div>

    <!-- Love progress (kept) -->
    <div class="love-progress" aria-hidden="true">
      <div class="love-progress-fill" id="loveProgressFill"></div>
    </div>

    <!-- Main Grid -->
    <div class="grid">
      <!-- Left: slideshow -->
      <div class="slideshow-card">
        <div class="slideshow-frame" id="slideshow">
          <!-- Slides -->
          <div class="slide active"><img src="https://files.catbox.moe/95q5xp.jpg" alt="1"></div>
          <div class="slide"><img src="https://files.catbox.moe/thloyl.jpg" alt="2"></div>
          <div class="slide"><img src="https://files.catbox.moe/gb2ds2.jpg" alt="3"></div>
          <div class="slide"><img src="https://files.catbox.moe/64l6nv.jpg" alt="4"></div>
          <div class="slide"><img src="https://files.catbox.moe/lxmk1o.jpg" alt="5"></div>
          <div class="slide"><img src="https://files.catbox.moe/89jm6k.jpg" alt="6"></div>
          <div class="slide"><img src="https://files.catbox.moe/gp2dnd.jpg" alt="7"></div>
          <div class="slide"><img src="https://files.catbox.moe/fpre5p.jpg" alt="8"></div>
          <div class="slide"><img src="https://files.catbox.moe/yrzrve.jpg" alt="9"></div>
          <div class="slide"><img src="https://files.catbox.moe/ah2hxx.jpg" alt="10"></div>
          <div class="slide"><img src="https://files.catbox.moe/cyk4cb.jpg" alt="11"></div>
          <div class="slide"><img src="https://files.catbox.moe/p88yak.jpg" alt="12"></div>

          <!-- decorative corner hearts -->
          <span class="corner-heart tl">üíñ</span>
          <span class="corner-heart tr">üíò</span>
          <span class="corner-heart bl">üíï</span>
          <span class="corner-heart br">üíì</span>

          <!-- nav compact -->
          <div class="nav-btn nav-prev" id="prevBtn" title="Previous">‚Äπ</div>
          <div class="nav-btn nav-next" id="nextBtn" title="Next">‚Ä∫</div>

          <!-- NOTE: pause button removed (per your request) -->
          <div class="slideshow-top-right"></div>

          <!-- dots -->
          <div class="dots" id="dotsWrap" aria-hidden="true"></div>
        </div>

        <!-- small caption / instructions -->
        <div style="margin-top:12px; display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap">
          <div style="font-size:0.9rem; color:rgba(255,255,255,0.7)">Click ‚ü® ‚ü© or ch·∫°m ƒë·ªÉ chuy·ªÉn ‚Äî t·ª± ƒë·ªông m·ªói 5s</div>
          <div style="font-size:0.85rem; color:rgba(255,255,255,0.6)">Hover ƒë·ªÉ t·∫°m d·ª´ng</div>
        </div>

        <!-- Love question -->
        <div class="love-q" aria-hidden="false" id="loveQuestion">
          <div class="card" id="loveCard">
            <div class="question">Em c√≥ y√™u anh kh√¥ng?</div>
            <div class="actions">
              <button class="love-btn" id="btnYes">C√≥ üíñ</button>
              <button class="love-btn no" id="btnNo">Kh√¥ng üíî</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: info -->
      <aside class="right-panel" aria-label="Controls & Love Slider">
        <div style="font-size:0.95rem; color:rgba(255,255,255,0.9)">Th√¥ng tin & Th·ªëng k√™</div>

        <div style="display:flex; gap:8px; flex-wrap:wrap; justify-content:center; width:100%;">
          <div style="background:var(--glass); padding:8px 10px; border-radius:10px; min-width:84px; text-align:center;">
            <div id="years" style="font-weight:700">0</div><small>NƒÉm</small>
          </div>
          <div style="background:var(--glass); padding:8px 10px; border-radius:10px; min-width:84px; text-align:center;">
            <div id="months" style="font-weight:700">0</div><small>Th√°ng</small>
          </div>
          <div style="background:var(--glass); padding:8px 10px; border-radius:10px; min-width:84px; text-align:center;">
            <div id="days" style="font-weight:700">0</div><small>Ng√†y</small>
          </div>
        </div>
      </aside>
    </div>

    <footer>Powered by NgocDoiAn ‚Ä¢ Keep it cypherpunk ‚ú®</footer>
  </div>

  <!-- MUSIC -->
  <audio id="bgMusic" loop preload="auto">
    <source src="https://files.catbox.moe/4h5y1q.mp3" type="audio/mpeg">
  </audio>

  <script>
    /********** Settings you can edit quickly **********/
    const START_DATE = new Date("2024-07-14T00:00:00");
    const SLIDE_INTERVAL_MS = 5000;
    const TOTAL_HEARTS = 30;
    const FULL_DAYS_FOR_PROGRESS = 1000;
    /***************************************************/

    /* ===== heart background ===== */
    const heartBg = document.getElementById('heartBg');
    for(let i=0;i<TOTAL_HEARTS;i++){
      const el = document.createElement('div');
      el.className = 'heart';
      const size = 28 + Math.round(Math.random()*44);
      el.style.width = size + 'px';
      el.style.height = size + 'px';
      el.style.left = (Math.random()*110 - 5) + 'vw';
      el.style.top = (70 + Math.random()*30) + 'vh';
      el.style.animationDuration = (6 + Math.random()*10) + 's';
      el.style.animationDelay = -(Math.random()*10) + 's';
      el.style.opacity = (0.4 + Math.random()*0.9);
      el.style.transform = `rotate(${Math.random()*40-10}deg) scale(${0.7 + Math.random()*0.8})`;
      heartBg.appendChild(el);
    }

    /* ===== love counter (full Y/M/W/D/H/M/S) ===== */
    function updateCounter(){
      const now = new Date();
      const diff = now - START_DATE;

      const totalSeconds = Math.floor(diff/1000);
      const seconds = totalSeconds % 60;

      const totalMinutes = Math.floor(totalSeconds/60);
      const minutes = totalMinutes % 60;

      const totalHours = Math.floor(totalMinutes/60);
      const hours = totalHours % 24;

      const totalDays = Math.floor(totalHours/24);
      const weeks = Math.floor(totalDays/7);
      const months = Math.floor(totalDays/30) % 12;
      const years = Math.floor(totalDays/365);

      // top stats
      document.getElementById('cYears').textContent   = years;
      document.getElementById('cMonths').textContent  = months;
      document.getElementById('cWeeks').textContent   = weeks;
      document.getElementById('cDays').textContent    = totalDays;
      document.getElementById('cHours').textContent   = hours.toString().padStart(2,'0');
      document.getElementById('cMinutes').textContent = minutes.toString().padStart(2,'0');
      document.getElementById('cSeconds').textContent = seconds.toString().padStart(2,'0');

      // right small boxes (gi·ªØ nguy√™n logic c≈© c·ªßa b·∫°n)
      document.getElementById('years').textContent  = years;
      document.getElementById('months').textContent = months;
      document.getElementById('days').textContent   = totalDays;
      document.getElementById('loveDays').textContent = totalDays + ' ng√†y';

      // progress
      const pct = Math.min((totalDays / FULL_DAYS_FOR_PROGRESS) * 100, 100);
      document.getElementById('loveProgressFill').style.width = pct + '%';
    }
    updateCounter();
    setInterval(updateCounter, 1000);

    /* ===== slideshow ===== */
    const slides = Array.from(document.querySelectorAll('.slide'));
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const dotsWrap = document.getElementById('dotsWrap');
    let slideIndex = 0;
    let autoplayTimer = null;

    slides.forEach((s, idx) => {
      const dot = document.createElement('div');
      dot.className = 'dot' + (idx===0? ' active':'');
      dot.addEventListener('click', ()=> goTo(idx));
      dotsWrap.appendChild(dot);
    });
    const dots = Array.from(document.querySelectorAll('.dot'));

    function setActive(index){
      slides.forEach((s,i)=> s.classList.toggle('active', i===index));
      dots.forEach((d,i)=> d.classList.toggle('active', i===index));
    }
    function goTo(idx){
      slideIndex = (idx + slides.length) % slides.length;
      setActive(slideIndex);
    }
    function nextSlide(){
      slideIndex = (slideIndex + 1) % slides.length;
      setActive(slideIndex);
    }
    function prevSlide(){
      slideIndex = (slideIndex - 1 + slides.length) % slides.length;
      setActive(slideIndex);
    }
    prevBtn.addEventListener('click', ()=> { prevSlide(); restartAutoplay(); });
    nextBtn.addEventListener('click', ()=> { nextSlide(); restartAutoplay(); });

    const slideshowFrame = document.getElementById('slideshow');
    slideshowFrame.addEventListener('mouseenter', ()=> { stopAutoplay(true); });
    slideshowFrame.addEventListener('mouseleave', ()=> { startAutoplay(); });
    function startAutoplay(){ stopAutoplay(); autoplayTimer = setInterval(()=> nextSlide(), SLIDE_INTERVAL_MS); }
    function stopAutoplay(){ if(autoplayTimer) clearInterval(autoplayTimer); autoplayTimer = null; }
    function restartAutoplay(){ stopAutoplay(); startAutoplay(); }
    startAutoplay();

    /* ===== music toggle ===== */
    const bgMusic = document.getElementById('bgMusic');
    const musicToggle = document.getElementById('musicToggle');
    const musicIcon = document.getElementById('musicIcon');
    function tryPlayMusic(){
      bgMusic.volume = 0.28;
      const p = bgMusic.play();
      if(p !== undefined){
        p.then(()=> { musicIcon.textContent = 'üîä'; })
         .catch(()=> { musicIcon.textContent = 'üîá'; });
      }
    }
    tryPlayMusic();
    musicToggle.addEventListener('click', ()=> {
      if(bgMusic.paused){ bgMusic.play().catch(()=>{}); musicIcon.textContent='üîä'; }
      else{ bgMusic.pause(); musicIcon.textContent='üîá'; }
    });

    /* ===== LOVE SLIDER + aura + mood + thumb hearts ===== */
    const slider = document.getElementById('loveSlider');
    const mood = document.getElementById('moodIcon');
    const auraContainer = document.getElementById('auraContainer');
    const heartCircle = document.querySelector('.heart-circle');

    function spawnAuraHearts(count, intensity){
      const max = Math.min(10, Math.max(0, Math.floor(count)));
      for(let i=0;i<max;i++){
        const h = document.createElement('div');
        h.className = 'aura-heart';
        h.style.left = '50%';
        h.style.top = '50%';
        const angle = Math.random()*Math.PI*2;
        const radius = 60 + Math.random()*70;
        const dx = Math.round(Math.cos(angle) * radius * (0.7 + intensity*0.003));
        const dy = Math.round(Math.sin(angle) * radius * (0.5 + intensity*0.002)) * -1;
        h.style.setProperty('--dx', dx + 'px');
        h.style.setProperty('--dy', dy + 'px');
        h.style.animationDuration = (600 + Math.random()*700) + 'ms';
        auraContainer.appendChild(h);
        setTimeout(()=> { h.remove(); }, 1600);
      }
    }

    // tim bay ngay t·∫°i v·ªã tr√≠ n√∫m k√©o
    function spawnThumbHeart(val){
      const rect = slider.getBoundingClientRect();
      const ratio = (val - slider.min) / (slider.max - slider.min);
      const x = rect.left + ratio * rect.width;
      const y = rect.top + rect.height/2;

      const b = document.createElement('div');
      b.className = 'burst';
      b.textContent = val > 85 ? 'üíò' : 'üíñ';
      b.style.left = (x - 8) + 'px';
      b.style.top = (y - 10) + 'px';
      b.style.fontSize = (12 + Math.round(Math.random()*10)) + 'px';
      document.body.appendChild(b);
      setTimeout(()=> b.remove(), 1100);
    }

    function updateMood(val){
      val = Number(val);
      let emoji = 'üòê';
      if(val <= 5) emoji = 'üíÄ';
      else if(val <= 15) emoji = 'üíî';
      else if(val <= 30) emoji = 'üò¢';
      else if(val <= 45) emoji = 'üòï';
      else if(val <= 55) emoji = 'üòê';
      else if(val <= 70) emoji = 'üôÇ';
      else if(val <= 85) emoji = 'üòä';
      else emoji = 'üòç';
      mood.textContent = emoji;

      const scale = 1 + (val / 260);
      mood.style.transform = `scale(${scale})`;

      const blur1 = 10 + Math.round(val/2);
      const blur2 = 20 + Math.round(val/1.6);
      heartCircle.style.boxShadow = `inset 0 0 ${10 + val/6}px rgba(255,105,180,0.06), 0 8px ${blur1}px rgba(255,0,127,0.45), 0 0 ${blur2*1.6}px rgba(255,0,255,0.12)`;

      const spawnCount = Math.floor(val / 15);
      if (spawnCount > 0) spawnAuraHearts(spawnCount, val);

      const totalDays = Math.floor((Date.now() - START_DATE) / (1000*60*60*24));
      const pct = Math.min((totalDays / FULL_DAYS_FOR_PROGRESS) * 100, 100);
      const mixed = Math.min(100, Math.round((pct*0.6) + (val*0.4)));
      document.getElementById('loveProgressFill').style.width = mixed + '%';
    }

    slider.addEventListener('input', (e)=> {
      updateMood(e.target.value);
      spawnThumbHeart(e.target.value);
    });
    updateMood(slider.value);

    /* ===== accessibility: keyboard ===== */
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowRight') { nextSlide(); restartAutoplay(); }
      if(e.key === 'ArrowLeft') { prevSlide(); restartAutoplay(); }
      if(e.key === 'ArrowUp'){
        slider.value = Math.min(100, Number(slider.value) + 5); updateMood(slider.value); spawnThumbHeart(slider.value);
      }
      if(e.key === 'ArrowDown'){
        slider.value = Math.max(0, Number(slider.value) - 5); updateMood(slider.value); spawnThumbHeart(slider.value);
      }
    });

    /* ===== prevent drag/context menu on images ===== */
    document.querySelectorAll('.slide img').forEach(img=>{
      img.ondragstart = ()=> false;
      img.addEventListener('contextmenu', e=> e.preventDefault());
    });

    /* ===== responsive slide height ===== */
    function adjustSlideHeight(){
      const frame = document.querySelector('.slideshow-frame');
      if(window.innerWidth < 600){
        frame.style.height = '320px';
      } else if(window.innerWidth < 900){
        frame.style.height = '380px';
      } else {
        frame.style.height = '460px';
      }
    }
    adjustSlideHeight();
    window.addEventListener('resize', adjustSlideHeight);

    /* ===== initial setActive ===== */
    setTimeout(()=> setActive(slideIndex), 50);

    /* ===== LOVE QUESTION behavior ===== */
    const btnYes = document.getElementById('btnYes');
    const btnNo = document.getElementById('btnNo');
    const loveCard = document.getElementById('loveCard');
    const slideshowRect = () => document.getElementById('slideshow').getBoundingClientRect();

    function spawnBurstAt(x, y, count=14, emoji='üíñ'){
      for(let i=0;i<count;i++){
        const b = document.createElement('div');
        b.className = 'burst';
        b.textContent = emoji;
        const rx = (Math.random()-0.5)*160;
        const ry = (Math.random()-0.2)*80;
        b.style.left = (x + rx) + 'px';
        b.style.top = (y + ry) + 'px';
        b.style.fontSize = (12 + Math.round(Math.random()*18)) + 'px';
        document.body.appendChild(b);
        setTimeout(()=> b.remove(), 1400 + Math.random()*400);
      }
    }

    btnYes.addEventListener('click', ()=>{
      const r = slideshowRect();
      const cx = r.left + r.width/2;
      const cy = r.top + r.height/2;
      spawnBurstAt(cx, cy, 24, 'üíñ');
      spawnAuraHearts(6, 80);
      // nh·∫π nh√†ng nghi√™ng th·∫ª
      loveCard.style.transform = 'rotateX(6deg) rotateY(-6deg) scale(1.03)';
      setTimeout(()=> loveCard.style.transform = '', 500);
    });

    btnNo.addEventListener('click', ()=>{
      btnNo.classList.add('shake');
      setTimeout(()=> btnNo.classList.remove('shake'), 480);

      const r = slideshowRect();
      const cx = r.left + r.width/2;
      const cy = r.top + r.height/2;
      const br = document.createElement('div');
      br.className = 'broken';
      br.textContent = 'üíî';
      br.style.left = (cx - 24) + 'px';
      br.style.top = (cy - 24) + 'px';
      document.body.appendChild(br);
      setTimeout(()=> br.remove(), 1000);
    });
  </script>
</body>
</html>
